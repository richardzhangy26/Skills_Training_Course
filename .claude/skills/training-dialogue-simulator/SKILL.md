---
name: training-dialogue-simulator
description: 模拟能力训练的完整对话流程，严格按照实训任务文档中的对话示例和顺序进行测试。用于验证训练剧本的对话效果，确保智能体能够按照文档要求的顺序追问。关键词:对话测试、模拟对话、能力训练测试、对话流程验证
allowed-tools: Read, Grep, Glob, Write
---

# 对话流程模拟器

根据实训任务文档，模拟完整的能力训练对话流程，严格按照文档中的对话示例和顺序进行。

## 使用时机

当用户需要以下操作时使用此 skill:
- 测试训练剧本的对话效果
- 验证对话流程是否符合文档要求
- 模拟学生与智能体的完整交互过程
- 用户提到"测试对话"、"模拟对话"、"对话流程测试"等关键词

## Instructions

### 第一步: 读取并分析实训任务文档

1. 通过 Read 工具读取用户提供的实训任务文档
2. 从文档路径中提取任务名称（去掉路径和".md"扩展名），用于创建输出文件夹
3. **重点提取对话相关信息**:
   - **智能体人设**: 角色名称、性格特点、沟通风格、专业背景
   - **对话情景与示例**:
     - 开场白的完整原文
     - 学生可能的回答1、2、3...
     - 对应的智能体追问内容（保持原文）
     - 新增问题与追问
     - 对话的逻辑顺序
   - **任务流程**: 整个训练的阶段划分
   - **评价维度**: 对话中需要考察的能力点

### 第二步: 构建对话脚本

根据文档内容，构建完整的对话脚本：

1. **识别对话阶段**
   - 开场介绍
   - 主要交互环节（可能有多个）
   - 总结评价

2. **提取对话分支**
   - 列出所有"学生可能的回答X"
   - 对应每个回答的智能体追问
   - 标注追问的目的和考察点

3. **整理追问顺序**
   - 按照文档中的顺序排列
   - 标注哪些是必问问题
   - 标注哪些是条件触发的追问

### 第三步: 生成对话流程文档

输出格式如下：

```markdown
# [任务名称] - 完整对话流程

## 智能体角色设定
- 姓名: [角色名字]
- 角色: [职位/身份]
- 性格: [性格特点]
- 沟通风格: [沟通特点]
- 专业背景: [相关背景]

## 对话目标
[简述这个对话要考察学生的哪些能力]

---

## 对话流程

### 阶段1: [阶段名称]

#### 开场白（智能体）
[完整复制文档中的开场白原文，不做任何修改]

#### 对话分支

##### 分支1: 学生回答 - [场景描述]
**学生说**: "[完整复制文档中的学生可能回答1]"

**智能体追问**: "[完整复制文档中对应的追问内容]"

**追问目的**: [说明这个追问考察什么能力]

**预期学生回答**: [学生应该如何回答才能得分]

---

##### 分支2: 学生回答 - [场景描述]
**学生说**: "[完整复制文档中的学生可能回答2]"

**智能体追问**: "[完整复制文档中对应的追问内容]"

**追问目的**: [说明这个追问考察什么能力]

**预期学生回答**: [学生应该如何回答才能得分]

---

##### 分支3: 学生提到关键概念 - [关键词]
**学生说**: [学生提到某个关键概念时的回答]

**智能体追问**: "[文档中对应的追问]"

**追问目的**: [考察点]

**预期学生回答**: [理想回答]

---

#### 深入追问（根据学生表现触发）

1. **关于[主题1]**
   - 智能体问: "[文档原文]"
   - 目的: [引导学生...]
   - 预期回答: [...]

2. **关于[主题2]**
   - 智能体问: "[文档原文]"
   - 目的: [引导学生...]
   - 预期回答: [...]

---

### 阶段2: [下一个阶段名称]
[按相同格式展开]

---

## 对话示例（完整模拟）

### 示例对话1: 理想路径
这是一个学生表现优秀的完整对话示例：

**智能体**: [开场白]

**学生**: [优秀的回答1]

**智能体**: [对应的追问]

**学生**: [优秀的回答2]

**智能体**: [继续追问]

...

**总结**: 学生在[维度1]、[维度2]、[维度3]上表现优秀，预计得分[X]分。

---

### 示例对话2: 需要引导的路径
这是一个学生需要引导才能答对的对话示例：

**智能体**: [开场白]

**学生**: [不完整的回答]

**智能体**: [引导性追问]

**学生**: [仍然不清楚]

**智能体**: [更直接的提示]

**学生**: [恍然大悟，给出正确答案]

...

**总结**: 学生需要较多引导，在[维度1]上表现一般，预计得分[Y]分。

---

### 示例对话3: 表现不佳的路径
这是一个学生回答不理想的对话示例：

**智能体**: [开场白]

**学生**: [错误或偏离主题的回答]

**智能体**: [纠正并追问]

**学生**: [仍然答不好]

...

**总结**: 学生在[维度]上表现欠佳，预计得分[Z]分。

---

## 评分对照

| 对话表现 | 评分维度 | 得分范围 |
|---------|---------|---------|
| [具体表现描述] | [评分项1] | [X-Y分] |
| [具体表现描述] | [评分项2] | [X-Y分] |
| ... | ... | ... |

---

## 测试要点

在实际测试中，需要重点验证：

1. ✅ 开场白是否与文档完全一致
2. ✅ 智能体的追问是否按照文档顺序进行
3. ✅ 追问话术是否保持文档原味（特别是角色语言风格）
4. ✅ 是否覆盖了所有"学生可能的回答X"分支
5. ✅ 深入追问是否能根据关键词正确触发
6. ✅ 对话是否能考察到评分标准的各个维度

---

## 建议的测试步骤

1. **测试开场**: 启动训练，验证开场白
2. **测试分支1**: 给出"学生可能的回答1"，看智能体是否按预期追问
3. **测试分支2**: 给出"学生可能的回答2"，看智能体是否按预期追问
4. **测试关键词触发**: 在回答中提到关键概念，看是否触发对应追问
5. **测试深入追问**: 验证所有"新增问题与追问"是否能正确触发
6. **测试完整流程**: 走完整个对话，检查逻辑是否连贯
```

### 第四步: 创建输出文件夹并保存

1. 在实训任务文档所在目录创建以任务名称命名的文件夹（如果不存在）
2. 将生成的 Markdown 对话流程文档保存到该文件夹中，文件名为 `对话流程模拟.md`
3. 向用户输出文档摘要和文件保存路径

## Important Notes

1. **严格保持原文**: 智能体的开场白和追问内容必须与文档原文一致，不要修改或美化
2. **覆盖所有分支**: 文档中每一个"学生可能的回答X"都要列出对应的追问
3. **标注考察点**: 每个追问都要说明考察的是什么能力
4. **提供示例对话**: 至少提供3个不同水平的完整对话示例（优秀、中等、欠佳）
5. **测试清单**: 提供明确的测试要点，方便验证配置是否正确
6. **自动保存**: 使用 Write 工具将对话流程文档保存到以任务命名的文件夹中

## Output Format

输出完整的 Markdown 格式文档，包含：
- 智能体角色设定
- 完整的对话流程（按阶段、分支组织）
- 多个示例对话（不同水平）
- 评分对照表
- 测试要点和建议

## Examples

参见 examples.md 文件中的完整示例。

## Version History

- v1.0 (2025-11-24): 初始版本，支持对话流程模拟和测试验证
