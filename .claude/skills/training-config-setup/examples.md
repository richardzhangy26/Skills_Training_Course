# 训练基础配置生成器 - 使用示例

## 示例1：工业故障诊断课程

### 输入

**文档**: `化工原理-武夷学院/实训任务文档1-离心泵"汽蚀"故障紧急诊断.md`

**文档内容片段**:
```markdown
# 实训任务文档1-离心泵"汽蚀"故障紧急诊断

## 任务目标
通过模拟真实的工业现场故障情景，让学生作为工程师，
快速诊断和处理离心泵的汽蚀故障，掌握故障排查的方法
和通过现象分析原因、找出问题根源的工程思维。

## 任务描述
智能体角色为生产现场李主任，负责引导学生分析故障...
```

### 处理过程

```
📖 提取任务信息...
   ✓ 任务名称: 离心泵汽蚀故障紧急诊断
   ✓ 任务描述: 通过模拟真实的工业现场故障情景，让学生作为工程师...

🎨 生成封面图提示词...
   ✓ 提示词: 工业化工厂，离心泵运行场景，技术人员在仔细检查泵的状态...

🖼️  调用Doubao生成封面图...
   ✓ 成功生成! URL: https://ark.cn-beijing.volces.com/api/v3/image/...

📁 输出目录: /Users/richardzhang/工作/能力训练/化工原理-武夷学院/离心泵汽蚀故障紧急诊断
   ✓ 配置已保存: .../基础配置.json
   ✓ 提示词已保存: .../封面图提示词.txt

✨ 成功完成!
```

### 输出文件

**基础配置.json**:
```json
{
  "taskName": "离心泵汽蚀故障紧急诊断",
  "taskDescription": "通过模拟真实的工业现场故障情景，让学生作为工程师，快速诊断和处理离心泵的汽蚀故障。",
  "coverImage": {
    "url": "https://ark.cn-beijing.volces.com/api/v3/image/...",
    "prompt": "工业化工厂，离心泵运行场景，技术人员在仔细检查泵的状态，高清现代化工业设备，蓝色和灰色调，工业气氛浓厚，精密检测仪器，16:9宽屏，电影级质感，光影细节丰富",
    "format": "16:9",
    "size": "2K",
    "model": "doubao-seedream-4-0-250828"
  },
  "metadata": {
    "createdAt": "2025-11-25T10:30:00.000Z",
    "source": "化工原理-武夷学院/实训任务文档1-离心泵汽蚀故障紧急诊断.md"
  }
}
```

**封面图提示词.txt**:
```
任务: 离心泵汽蚀故障紧急诊断
生成时间: 2025-11-25T10:30:00.000Z
模型: doubao-seedream-4-0-250828
图片格式: 16:9 (2560x1440)
================

工业化工厂，离心泵运行场景，技术人员在仔细检查泵的状态，高清现代化工业设备，蓝色和灰色调，工业气氛浓厚，精密检测仪器，16:9宽屏，电影级质感，光影细节丰富
```

---

## 示例2：化学精馏实验课程

### 输入

**文档**: `化工原理-武夷学院/实训任务文档2-共沸精馏法制备无水乙醇.md`

### 自动生成

```
📖 提取任务信息...
   ✓ 任务名称: 共沸精馏法制备无水乙醇
   ✓ 任务描述: 学生在智能体指导下，通过虚拟实验环境完成共沸精馏实验...

🎨 生成封面图提示词...
   ✓ 匹配关键词: "精馏"
   ✓ 提示词: 化学实验室，精馏装置运行中，液体流动通过冷凝管...

🖼️  调用Doubao生成封面图...
   ✓ 成功生成! URL: https://ark.cn-beijing.volces.com/api/v3/image/...
```

### 生成配置示例

```json
{
  "taskName": "共沸精馏法制备无水乙醇",
  "taskDescription": "学生在智能体指导下，通过虚拟实验环境完成共沸精馏实验，掌握无水乙醇的制备方法。",
  "coverImage": {
    "url": "https://ark.cn-beijing.volces.com/api/v3/image/...",
    "prompt": "化学实验室，精馏装置运行中，液体流动通过冷凝管，蒸馏烧瓶加热，科学仪器精密排列，蓝白调，科技感强，专业教学环境，玻璃仪器闪烁反光，16:9宽屏，细节丰富",
    "format": "16:9",
    "size": "2K",
    "model": "doubao-seedream-4-0-250828"
  },
  "metadata": {
    "createdAt": "2025-11-25T11:00:00.000Z",
    "source": "化工原理-武夷学院/实训任务文档2-共沸精馏法制备无水乙醇.md"
  }
}
```

---

## 示例3：虚拟展馆参观课程

### 输入文档特点

```markdown
# 虚拟展馆参观体验

## 任务目标
让学生在虚拟环境中参观科技展馆，体验不同展区的交互式学习...

## 展区介绍
- 智能制造区
- 新能源区
- 生物科技区
```

### 自动提示词生成

关键词匹配：`"展馆"` → 使用展馆风格提示词

```
提示词: 现代科技展馆内部，宽敞明亮的展厅，各种创意展示品，
参观者在互动体验，科技感强烈，现代建筑风格，柔和的照明，
开放式空间，16:9宽屏，沉浸感十足
```

---

## 示例4：软技能培训课程

### 输入

**课程**: 非暴力沟通训练

### 处理结果

```json
{
  "taskName": "非暴力沟通协作实践",
  "taskDescription": "通过模拟职场场景，学习非暴力沟通技巧，提高团队协作效能...",
  "coverImage": {
    "url": "https://ark.cn-beijing.volces.com/api/v3/image/...",
    "prompt": "温暖的协作工作室，两个人在进行深入沟通交流，放松的氛围，柔和的自然光线，绿植点缀，现代简约风格，友好和谐，16:9宽屏，人性化气氛",
    "format": "16:9",
    "size": "2K",
    "model": "doubao-seedream-4-0-250828"
  },
  "metadata": {
    "createdAt": "2025-11-25T12:00:00.000Z",
    "source": "..."
  }
}
```

---

## 示例5：商务沟通课程

### 输入

**课程**: 投资推介会模拟

### 关键词匹配

关键词：`"投资"`

### 生成配置

```json
{
  "taskName": "投资推介会模拟",
  "taskDescription": "学生作为创业者向投资者进行项目推介，学习商务沟通和融资技巧...",
  "coverImage": {
    "url": "https://ark.cn-beijing.volces.com/api/v3/image/...",
    "prompt": "现代办公会议室，投资推介会场景，专业的演讲者，观众认真听讲，高档的会议设备，蓝色商务调，专业严谨的氛围，大屏幕显示，16:9宽屏，企业级质感",
    "format": "16:9",
    "size": "2K",
    "model": "doubao-seedream-4-0-250828"
  },
  "metadata": {
    "createdAt": "2025-11-25T13:00:00.000Z",
    "source": "..."
  }
}
```

---

## 工作流程完整示例

### 场景：为离心泵课程生成完整的训练配置

#### 第一步：生成基础配置
```bash
请根据这个文档生成基础配置:
@化工原理-武夷学院/实训任务文档1-离心泵"汽蚀"故障紧急诊断.md
```

✅ **输出**：
- 基础配置.json
- 封面图 (16:9, 2560×1440)
- 封面图提示词.txt

#### 第二步：生成训练剧本
```bash
请根据这个文档生成训练剧本配置:
@化工原理-武夷学院/实训任务文档1-离心泵"汽蚀"故障紧急诊断.md
```

✅ **输出**：
- 训练剧本配置.md (包含完整的提示词和阶段设计)

#### 第三步：模拟对话测试
```bash
请模拟这个课程的完整对话流程:
@化工原理-武夷学院/实训任务文档1-离心泵"汽蚀"故障紧急诊断.md
```

✅ **输出**：
- 对话流程模拟.md (包含测试对话)

---

## 最终目录结构

```
化工原理-武夷学院/
├── 实训任务文档1-离心泵"汽蚀"故障紧急诊断.md
└── 离心泵汽蚀故障紧急诊断/
    ├── 基础配置.json                 ← training-config-setup生成
    ├── 封面图提示词.txt              ← training-config-setup生成
    ├── 训练剧本配置.md               ← training-script-generator生成
    └── 对话流程模拟.md               ← training-dialogue-simulator生成
```

---

## 提示词参考库

### 按课程类型分类

#### 工业类（离心泵、故障诊断等）
```
工业化工厂，离心泵运行场景，技术人员在仔细检查泵的状态，
高清现代化工业设备，蓝色和灰色调，工业气氛浓厚，精密检测仪器，
16:9宽屏，电影级质感，光影细节丰富
```

#### 化学类（精馏、实验等）
```
化学实验室，精馏装置运行中，液体流动通过冷凝管，蒸馏烧瓶加热，
科学仪器精密排列，蓝白调，科技感强，专业教学环境，玻璃仪器闪烁反光，
16:9宽屏，细节丰富
```

#### 展馆类（虚拟参观等）
```
现代科技展馆内部，宽敞明亮的展厅，各种创意展示品，参观者在互动体验，
科技感强烈，现代建筑风格，柔和的照明，开放式空间，16:9宽屏，沉浸感十足
```

#### 沟通类（非暴力沟通等）
```
温暖的协作工作室，两个人在进行深入沟通交流，放松的氛围，
柔和的自然光线，绿植点缀，现代简约风格，友好和谐，16:9宽屏，人性化气氛
```

#### 商务类（投资推介等）
```
现代办公会议室，投资推介会场景，专业的演讲者，观众认真听讲，
高档的会议设备，蓝色商务调，专业严谨的氛围，大屏幕显示，16:9宽屏，企业级质感
```

---

## 常见定制场景

### 场景A：使用自定义提示词

如果对自动生成的提示词不满意，可以编辑 `封面图提示词.txt`，
然后手动调用API重新生成：

```python
from config_generator import TrainingConfigSetup

generator = TrainingConfigSetup()
custom_prompt = "你的自定义提示词..."
url = generator.generate_cover_image(custom_prompt)
print(f"新生成的图片: {url}")
```

### 场景B：批量生成配置

对多个课程生成配置：

```bash
for file in 化工原理-武夷学院/*.md; do
  python config_generator.py "$file"
done
```

### 场景C：与平台集成

获取配置JSON并用于平台API：

```python
import json

with open('基础配置.json', 'r', encoding='utf-8') as f:
    config = json.load(f)

# 上传到平台
upload_to_platform(config)
```

---

## 故障排除

### 问题1：提示词没有匹配到关键词

**症状**：生成的提示词太通用

**解决**：
1. 检查文档中是否包含关键词（如"离心泵"、"精馏"等）
2. 如果没有，可以手动编辑 `封面图提示词.txt`
3. 保存新提示词后重新调用生成

### 问题2：API调用超时

**症状**："Doubao API调用失败: timed out"

**解决**：
1. 检查网络连接
2. 确认API密钥有效
3. 检查API配额是否充足
4. 稍后重试

### 问题3：生成的图片质量不满意

**症状**：图片不清晰或不符合预期

**解决**：
1. 调整提示词细节
2. 尝试使用参考库中的提示词模板
3. 多次生成选择最满意的版本

---

## 版本更新日志

### v1.0 (2025-11-25)
- ✨ 初始版本发布
- ✅ 支持任务名称和描述自动提取
- ✅ Doubao模型集成
- ✅ 16:9智能提示词生成
- ✅ JSON配置规范化输出
