---
name: training-script-generator
description: 根据实训任务文档自动生成完整的能力训练剧本配置。生成包含阶段名称、互动轮次、提示词、场景配置的Markdown格式配置文件，提示词会引用文档中的对话示例以确保对话效果符合预期。关键词:实训、能力训练、训练剧本、智能体配置、评分标准、生成配置
allowed-tools: Read, Grep, Glob, Write
---

# 训练剧本生成器

根据实训任务文档，自动生成完整的能力训练剧本配置，输出 Markdown 格式的易读配置文件。

## 使用时机

当用户需要创建或配置能力训练时使用此 skill，典型场景包括:
- 用户提供了实训任务文档，需要生成训练剧本配置
- 用户询问如何配置能力训练的各个阶段
- 用户需要为教学场景设计智能体对话流程
- 用户提到"生成训练剧本"、"配置能力训练"、"实训任务配置"等关键词

## Instructions

### 第一步: 获取并分析实训任务文档

1. 通过 Read 工具读取用户提供的实训任务文档
2. 从文档路径中提取任务名称（去掉路径和".md"扩展名），用于创建输出文件夹
3. 提取以下关键信息:
   - **任务目标**: 教学意图、能力培养目标
   - **任务描述**: 智能体人设(角色、性格、背景)、任务流程、阶段划分
   - **对话情景与示例** (如有):
     - 开场白的具体内容
     - 学生可能的回答和智能体追问
     - 对话的流程和逻辑
   - **其他材料要求**: 背景图、资源文件等需求

### 第二步: 设计训练阶段

根据任务流程设计合理的阶段划分:

1. **识别阶段节点**
   - 通常结构: 开场介绍 → 任务执行(可分多个子阶段) → 总结评价
   - 如有多个独立场景(如展馆)，需要设置场景选择阶段
   - 如有多角色扮演，为每个角色创建独立阶段
   - 为每个阶段编写清晰的阶段描述（1-2句话说明该阶段的核心目标）

2. **确定互动轮次** (参考 reference.md)
   - 0轮: 智能体自动输出(背景介绍、规则说明)
   - 1-3轮: 简单问答或快速交互
   - 4-6轮: 中等深度讨论
   - 7-10轮: 深度分析或复杂诊断场景

3. **编写开场白**
   - 紧扣场景和角色设定
   - 语言风格符合智能体人设
   - 明确告知学生当前任务

### 第三步: 为每个阶段生成提示词

使用 LangGPT 框架设计高质量提示词，必须包含以下结构:

```
# Role: [角色名称]

## Profile
- Description: [详细的角色描述 - 年龄、背景、性格、专业领域]
- Skills: [核心能力列表]

## Rules
1. **任务目标**: [本阶段需完成的完整任务描述，包括：任务内容、执行流程、互动逻辑、完成标准。要详细说明智能体在整个阶段中如何与学生互动，每一步要做什么，如何根据学生回答推进对话，最终达到什么效果才算完成任务]
2. **回避意图应对**: 当识别到用户表达"不知道""不太清楚""换个问题吧""这个问题太难了"等无法解答或希望更换问题的意图时，需保持角色语气，先简单回应以缓解对话氛围，随后立即围绕当前知识点提出一个难度更低、更贴近基础认知的新问题，避免重复已提问题。
3. **答非所问应对**: 当识别到用户回应与当前所提问题答非所问时，需用角色语气委婉提醒，引导对话回归主题（如"您说的这个我有点没跟上，是不是和我问的XX问题有关呀？我再把问题说一遍哦——XX"），提醒后重复原问题或结合原问题核心简化提问，确保互动聚焦当前知识点。
4. **沉默/敷衍应对**: 当用户仅回复"嗯""好""哦"等敷衍性内容时，需友好追问引导用户展开回答，如"能再具体说说吗？"或提供选项降低回答难度。
5. [输出格式要求，如字数限制、结构要求]
6. [语言风格要求]

## Constraints
1. [边界限制 - 不涉及的话题范围]
2. [行为约束 - 不得做的事情]
3. [安全要求]

## Context (如适用)
[当前场景的背景信息、关键参数、已知条件]

## Examples (如文档提供了对话示例)
如果文档中有"对话情景与示例"部分，在这里引用关键的对话示例：
- 开场白: [文档原文]
- 典型追问: [文档中的追问示例]
目的是让 AI 参考这些示例的风格和逻辑进行对话。

## 跳转指令 (如需条件跳转)
当[触发条件]时，输出指令: [目标阶段名称]
```

**提示词设计要点**:
- **开场白**: 如果文档提供了开场白，在 openingRemark 字段中使用原文
- **对话示例**: 如果文档有对话示例，在 Examples 部分引用，让 AI 学习其风格
- **Rules 第一条 - 任务目标**: 必须详细描述本阶段的完整任务，包括互动流程、推进逻辑、完成标准，让 AI 知道如何在多轮对话中逐步引导学生完成任务
- **Rules 2-4 条 - Bad Case 处理**: 必须包含回避意图、答非所问、沉默敷衍三种情况的应对策略，根据角色特点定制话术
- 历史记录: 阶段间需要记忆则在 Context 中说明"参考历史对话"
- 跳转指令: 涉及条件跳转时，明确输出指令格式(必须与目标阶段名称一致)
- 输出控制: 在 Rules 中限制输出长度(建议 < 200字)

### 第四步: 生成 Markdown 格式配置

使用易读的 Markdown 格式组织配置内容，包含:

```markdown
# [任务名称] - 训练剧本配置

## 📋 基础配置
- **任务名称**: [...]
- **任务描述**: [...]
- **智能体角色**: [...]
- **目标受众**: [...]

## 📝 训练阶段

### 阶段1: [阶段名称]

**阶段描述**: [简要说明本阶段的核心目标和任务，1-2句话]

**互动轮次**: X轮

**开场白**:
```
[开场白原文]
```

**提示词**:
```
# Role: [角色名称]

## Profile
- Description: [...]
- Skills: [...]

## Rules
1. **任务目标**: [本阶段需完成的完整任务描述，详细说明互动流程和完成标准]
2. **回避意图应对**: [根据角色特点定制的回避应对策略]
3. **答非所问应对**: [根据角色特点定制的跑题应对策略]
4. **沉默/敷衍应对**: [根据角色特点定制的敷衍应对策略]
5. [输出格式要求]
6. [语言风格要求]

## Constraints
1. [...]
2. [...]

## Context
[...]

## 跳转指令
当[条件]时，输出指令: [目标阶段名称]
```

**场景配置**:
- 背景: [...]
- 关键设备/道具: [...]
- 特殊要求: [...]

---

[其他阶段...]

## 🔀 阶段跳转关系

1. [阶段A] → [阶段B]
   - 触发条件: [...]
   - 跳转指令: `[...]`

2. [阶段B] → [阶段C]
   - 触发条件: [...]
   - 跳转指令: `[...]`

## 💡 配置说明

### 设计思路
[阶段设计的整体思路]

### 跳转逻辑
[阶段间跳转的逻辑说明]

### 特殊处理
[需要特别注意的配置点]

### 优化建议
[后续可以改进的方向]
```

### 第五步: 创建输出文件夹并保存

1. 在实训任务文档所在目录创建以任务名称命名的文件夹（如果不存在）
2. 将生成的 Markdown 配置文件保存到该文件夹中，文件名为 `训练剧本配置.md`
3. 输出内容应包含：
   - 基础配置（任务名称、描述、智能体角色、目标受众）
   - 训练阶段（每个阶段包含：阶段描述、互动轮次、开场白、提示词、场景配置）
   - 阶段跳转关系
   - 配置说明（设计思路、跳转逻辑、特殊处理、优化建议）
4. 向用户输出配置摘要和文件保存路径

## Examples

参见 examples.md 文件中的完整示例。

## Important Notes

1. **严格基于文档**: 不要随意添加文档中没有的内容
2. **保持信息完整**: 智能体人设、对话示例必须完整保留
3. **阶段描述清晰**: 每个阶段都要有简洁明确的阶段描述（1-2句话）
4. **开场白原文**: 如果文档提供了开场白，必须使用原文
5. **引用对话示例**: 如果文档有对话示例，在提示词的 Examples 部分引用关键示例
6. **提示词简洁**: 提示词重点描述策略和原则，不需要列出所有具体对话分支
7. **跳转条件准确**: 条件跳转的指令名称必须与目标阶段名称完全一致
8. **Markdown 格式**: 使用清晰的标题层级和代码块，方便阅读和复制
9. **自动保存**: 使用 Write 工具将配置保存到以任务命名的文件夹中
10. **不生成评分标准**: 配置文件中暂时不需要包含评价标准部分

## Special Scenarios

### 展馆/多选一场景
- 第1阶段: "场景选择" (轮次1-3, 询问选择)
- 第2-N阶段: 各场景详细内容
- 提示词需包含执行优先级和意图识别逻辑
- 跳转设置: 仅一条默认线，其他为条件跳转

### 多角色扮演
- 为每个角色创建独立阶段
- 提示词中明确角色切换标识
- 开场白要说明当前角色

### 紧急故障诊断
- 开场白营造紧迫感
- 设计多层次追问(现象→原因→处理)
- 互动轮次建议 6-10轮

## Version History

- v1.0 (2025-11-24): 初始版本，支持基本的训练剧本生成
